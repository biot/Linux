// SPDX-License-Identifier: GPL-2.0-only
#ifndef _RTL838X_ETH_H
#define _RTL838X_ETH_H

#include "rtl83xx-eth.h"

/* Reset */
#define RTL838X_RST_GLB_CTRL					0x003c
#define   _RTL838X_SW_NIC_RST					BIT(3)

/* EEE timers */
#define RTL838X_EEE_TX_TIMER_GIGA_CTRL				0xaa04
#define RTL838X_EEE_TX_TIMER_GELITE_CTRL			0xaa08

/* Congestion control */
#define RTL838X_CNGST_EN					0xd57c
#define RTL838X_CNGST_EN_TIMER					4
#define RTL838X_CNGST_EN_SUST_TIMER_LIMIT			4

#define RTL838X_MAC_ADDR					0xa9ec
#define RTL838X_MAC_ALE						0x6b04
#define RTL838X_MAC2						0xa320

/* MAC handling */
#define RTL838X_MAC_LINK_STS					0xa188
#define RTL838X_MAC_LINK_SPD_STS				0xa190
#define RTL838X_MAC_LINK_DUP_STS				0xa19c
#define RTL838X_MAC_TX_PAUSE_STS				0xa1a0
#define RTL838X_MAC_RX_PAUSE_STS				0xa1a4

/* Tables */
#define RTL838X_TBL_ACCESS_L2_CTRL				0x6900
#define RTL838X_TBL_ACCESS_L2_DATA				0x6908
#define RTL838X_TBL_ACCESS_CTRL_0				0x6914
#define RTL838X_TBL_ACCESS_DATA_0				0x6918
#define RTL838X_TBL_ACCESS_CTRL_1				0xA4C8
#define RTL838X_TBL_ACCESS_DATA_1				0xA4CC

/* L2 table flush control */
#define RTL838X_L2_TBL_FLUSH_CTRL				0x3370
#define   _RTL838X_L2FLUSH_STS					BIT(26)
#define   _RTL838X_L2FLUSH_ACT					BIT(25)
#define   _RTL838X_L2FLUSH_FVID_CMP				BIT(24)
#define   _RTL838X_L2FLUSH_PORT_CMP				BIT(23)
#define   _RTL838X_L2FLUSH_ENTRY_TYPE				BIT(22)
#define   _RTL838X_L2FLUSH_FVID					10
#define   _RTL838X_L2FLUSH_PORT					5
#define   _RTL838X_L2FLUSH_REPLACING_PORT			0

/* NIC DMA */
#define RTL838X_DMA_IF_RX_BASE_DESC_ADDR_CTRL(ring)		(0x9f00 + (ring << 2))
#define RTL838X_DMA_IF_TX_BASE_DESC_ADDR_CTRL(ring)		(0x9f40 + (ring << 2))
#define RTL838X_DMA_IF_RX_RING_SIZE(ring)			(0xb7e4 + ((ring >> 3) << 2))
#define RTL838X_DMA_IF_RX_RING_CNTR(ring)			(0xb7e8 + ((ring >> 3) << 2))
#define RTL838X_DMA_IF_RX_CUR(ring)				(0x9F20 + (ring << 2))
#define RTL838X_DMA_IF_INTR_MSK					0x9f50
#define   _RTL838X_DMAIFINTRMSK_TX_ALL_DONE			18
#define   _RTL838X_DMAIFINTRMSK_TX_DONE				16
#define   _RTL838X_DMAIFINTRMSK_RX_DONE				8
#define   _RTL838X_DMAIFINTRMSK_RX_RUN_OUT			0
#define RTL838X_DMA_IF_INTR_STS					0x9f54
#define   _RTL838X_DMAIFINTRSTS_TX_ALL_DONE			18
#define   _RTL838X_DMAIFINTRSTS_TX_DONE				16
#define   _RTL838X_DMAIFINTRSTS_RX_DONE				8
#define   _RTL838X_DMAIFINTRSTS_RX_RUN_OUT			0
#define RTL838X_DMA_IF_CTRL					0x9f58
#define   _RTL838X_DMAIF_RX_TRUNCATE_LEN			16
#define   _RTL838X_DMAIF_TX_PAD_EN				BIT(5)
#define   _RTL838X_DMAIF_RX_TRUNCATE_EN				BIT(4)
#define   _RTL838X_DMAIF_TX_EN					BIT(3)
#define   _RTL838X_DMAIF_RX_EN					BIT(2)
#define   _RTL838X_DMAIF_TX_FETCH				BIT(1)
#define   _RTL838X_DMAIF_TX_BUSY				BIT(0)

/* MAC control */
#define RTL838X_MAC_PORT_CTRL(port)				(0xd560 + (port << 7))
#define   _RTL838X_MACPORT_RX_FIFO_ERROR			BIT(14)
#define   _RTL838X_MACPORT_RX_ENTRY_ERROR			BIT(13)
#define   _RTL838X_MACPORT_TX_FIFO_ERROR			BIT(12)
#define   _RTL838X_MACPORT_TX_ENTRY_ERROR			BIT(11)
#define   _RTL838X_MACPORT_RX_RXER_CHK_EN			BIT(10)
#define   _RTL838X_MACPORT_BYP_TX_CRC				BIT(9)
#define   _RTL838X_MACPORT_PASS_ALL_MODE_EN			BIT(8)
#define   _RTL838X_MACPORT_PRECOLLAT_SEL			6
#define   _RTL838X_MACPORT_LATE_COLI_THR			4
#define   _RTL838X_MACPORT_RX_CHK_CRC_EN			BIT(3)
#define   _RTL838X_MACPORT_BKPRES_EN				BIT(2)
#define   _RTL838X_MACPORT_TXRX_EN				0
#define RTL838X_MAC_FORCE_MODE_CTRL(port)			(0xa104 + (port << 2))
#define   _RTL838X_MACFORCEMODE_SMI_PHY_POWER_SEL		BIT(27)
#define   _RTL838X_MACFORCEMODE_SMI_RETRY_SPDN_GLITE		BIT(26)
#define   _RTL838X_MACFORCEMODE_SMI_EN_MY_SOFTNP		BIT(25)
#define   _RTL838X_MACFORCEMODE_SMI_RETRY_SPDN_10M		BIT(24)
#define   _RTL838X_MACFORCEMODE_SMI_SPDN_THR			BIT(23)
#define   _RTL838X_MACFORCEMODE_SMI_EN_RETRY_SPD_DN		BIT(22)
#define   _RTL838X_MACFORCEMODE_SMI_EN_2PAIR_SPD_DN		BIT(21)
#define   _RTL838X_MACFORCEMODE_SMI_BYPASS_GLITE_UP1		BIT(20)
#define   _RTL838X_MACFORCEMODE_SMI_GLITE_MASTER_SLV_MANUAL_EN	BIT(19)
#define   _RTL838X_MACFORCEMODE_SMI_GLITE_MASTER_SLV_MANUAL_SEL	BIT(18)
#define   _RTL838X_MACFORCEMODE_SMI_GLITE_PORT_TYPE		BIT(17)
#define   _RTL838X_MACFORCEMODE_SMI_GLITE_EEE			BIT(16)
#define   _RTL838X_MACFORCEMODE_SMI_GLITE_SEL			BIT(15)
#define   _RTL838X_MACFORCEMODE_MEDIA_SEL			BIT(14)
#define   _RTL838X_MACFORCEMODE_PHY_MASTER_SLV_MANUAL_EN	BIT(13)
#define   _RTL838X_MACFORCEMODE_PHY_MASTER_SLV_MANUAL_SEL	BIT(12)
#define   _RTL838X_MACFORCEMODE_PHY_PORT_TYPE			BIT(11)
#define   _RTL838X_MACFORCEMODE_EEE_1000M_EN			BIT(10)
#define   _RTL838X_MACFORCEMODE_EEE_100M_EN			BIT(9)
#define   _RTL838X_MACFORCEMODE_MAC_FORCE_FC_EN			BIT(8)
#define   _RTL838X_MACFORCEMODE_RX_PAUSE_EN			BIT(7)
#define   _RTL838X_MACFORCEMODE_TX_PAUSE_EN			BIT(6)
#define   _RTL838X_MACFORCEMODE_SPD_SEL				4
#define   _RTL838X_MACFORCEMODE_DUP_SEL				BIT(3)
#define   _RTL838X_MACFORCEMODE_NWAY_EN				BIT(2)
#define   _RTL838X_MACFORCEMODE_FORCE_LINK_EN			BIT(1)
#define   _RTL838X_MACFORCEMODE_MAC_FORCE_EN			BIT(0)

#endif /* _RTL838X_ETH_H */
